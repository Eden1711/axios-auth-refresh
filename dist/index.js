"use strict";var h=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var T=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var R=(t,e)=>{for(var r in e)h(t,r,{get:e[r],enumerable:!0})},g=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of T(e))!A.call(t,o)&&o!==r&&h(t,o,{get:()=>e[o],enumerable:!(i=k(e,o))||i.enumerable});return t};var p=t=>g(h({},"__esModule",{value:!0}),t);var d={};R(d,{applyAuthTokenInterceptor:()=>q});module.exports=p(d);var q=(t,e)=>{let r=!1,i=[],o=(n,s=null)=>{i.forEach(u=>{n?u.reject(n):u.resolve(s)}),i=[]},f=(n,s)=>{n.headers.set("Authorization",`Bearer ${s}`)};t.interceptors.response.use(n=>n,async n=>{var u;let s=n.config;if(((u=n.response)==null?void 0:u.status)!==401||!s||s._retry)return Promise.reject(n);if(r)return new Promise(function(a,c){i.push({resolve:l=>{(e.attachTokenToRequest||f)(s,l),a(t(s))},reject:l=>{c(l)}})});s._retry=!0,r=!0;try{let a=e.getRefreshToken();if(!a)throw new Error("No refresh token available");let c=await e.requestRefresh(a);return e.onSuccess(c),(e.attachTokenToRequest||f)(s,c.accessToken),o(null,c.accessToken),t(s)}catch(a){return o(a,null),e.onFailure(a),Promise.reject(a)}finally{r=!1}})};0&&(module.exports={applyAuthTokenInterceptor});
//# sourceMappingURL=index.js.map